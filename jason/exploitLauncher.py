#!/usr/bin/env python3

# This script will launch the given exploit against the given port every <timer> seconds <rounds> times.
# It should be launched from the same directory as the exploit location
import sys
import os
import time

# There will be a static list of ip addresses to launch against
# during the CTF
ipList = []

if sys.argv[1] is None or sys.argv[2] is None:
    print("Useage: exploitLauncher <exploit script> <timer in seconds> <rounds> <service port>")

exploitName = sys.argv[1]
timer = sys.argv[2]
rounds = sys.argv[3]
port = sys.argv[4]

if not timer.isnumeric():
    print("timer must be a number")
    exit(1)

if not rounds.isnumeric():
    print("rounds must be a number")
    exit(1)

if not port.isnumeric():
    print("port must be a number")
    exit(1)

if int(port) > 65535 or int(port) < 0:
    print("port must be between 0 and 65535")
    exit(1)

for i in rounds:
    for ip in ipList:
        os.system('nc %s:%s > %s' % (ip, port, exploitName))
    time.sleep(float(timer))
